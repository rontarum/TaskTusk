@import url("https://fonts.googleapis.com/css2?family=Poppins&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Merriweather&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Geist+Mono&display=swap");
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Definition of the design system. All colors, gradients, fonts, etc should be defined here.
All colors MUST be HSL.
*/

@layer base {
  :root {
    font-size: 125%;
    --background:
      0 0% 93%;
    --foreground:
      231 21% 44%;

    --card:
      120 5% 96%;
    --card-foreground:
      231 21% 44%;

    --popover:
      0 0% 100%;
    --popover-foreground:
      222.2 84% 4.9%;

    --primary:
      160 80% 53%;
    --primary-foreground:
      0 0% 100%;

    --secondary:
      198 41% 92%;
    --secondary-foreground:
      240 60% 7%;

    --muted:
      225 64% 91%;
    --muted-foreground:
      215.4 16.3% 46.9%;

    --accent:
      180 33% 95%;
    --accent-foreground:
      232 49% 12%;

    --destructive:
      339 100% 65%;
    --destructive-foreground:
      0 100% 95%;

    --border:
      0 0% 96%;
    --input:
      214.3 31.8% 91.4%;
    --ring:
      217 32.5843% 17.451%;

    --radius:
      3rem;

    /* Lightweight elevation */
    --shadow-xs:
      0 1px 0 hsl(var(--shadow-color) / 0.05), 0 6px 12px -10px hsl(var(--shadow-color) / 0.22);
    --shadow-soft:
      0 1px 2px hsl(var(--shadow-color) / 0.06), 0 6px 18px -10px hsl(var(--shadow-color) / 0.18);
    --shadow-elev:
      0 2px 6px hsl(var(--shadow-color) / 0.08), 0 16px 40px -18px hsl(var(--shadow-color) / 0.22);

    /* Paper UI tokens */
    /* Lighter outline borders in light theme (close to white, as in reference) */
    --button-outline:
      0 0% 100%;
    --primary-border:
      222.2 47.4% 16%;

    --app-bg-1:
      210 40% 98%;
    --app-bg-2:
      210 30% 96%;
    --app-glow-a:
      200 92% 90%;
    --app-glow-b:
      24 95% 92%;

    /* Score visualization (hue 0â†’120; keep S/L consistent via vars) */
    --score-sat:
      72%;
    --score-lit:
      40%;

    --sidebar-background:
      0 0% 98%;

    --sidebar-foreground:
      240 5.3% 26.1%;

    --sidebar-primary:
      240 5.9% 10%;

    --sidebar-primary-foreground:
      0 0% 98%;

    --sidebar-accent:
      240 4.8% 95.9%;

    --sidebar-accent-foreground:
      240 5.9% 10%;

    --sidebar-border:
      220 13% 91%;

    --sidebar-ring:
      217.2 91.2% 59.8%;

    --font-heading: Gropled, ui-sans-serif, system-ui, sans-serif;
    --font-body: Monaco, ui-sans-serif, system-ui, sans-serif;
    --font-numbers: Neutral Face, ui-sans-serif, system-ui, sans-serif;
    --font-sans: var(--font-body);
    --font-serif: ui-serif, Georgia, serif;
    --font-mono: ui-monospace, SFMono-Regular, monospace;

    --font-weight-heading: 600;
    --font-weight-body: 500;
    --font-weight-numbers: 500;

    --shadow-sm:
      0px 1px 3.5px 0px hsl(var(--shadow-color) / 0.21);

    --shadow:
      0px 1px 7px 0px hsl(var(--shadow-color) / 0.21);

    --shadow-md:
      0px 1px 10.5px 0px hsl(var(--shadow-color) / 0.21);

    --shadow-lg:
      0px 1px 17.5px 0px hsl(var(--shadow-color) / 0.21);
  }

  .dark {
    --background:
      222.2 84% 4.9%;
    --foreground:
      210 40% 98%;

    --card:
      222.2 84% 4.9%;
    --card-foreground:
      210 40% 98%;

    --popover:
      222.2 84% 4.9%;
    --popover-foreground:
      210 40% 98%;

    --primary:
      210 40% 98%;
    --primary-foreground:
      222.2 47.4% 11.2%;

    --secondary:
      217.2 32.6% 17.5%;
    --secondary-foreground:
      210 40% 98%;

    --muted:
      217.2 32.6% 17.5%;
    --muted-foreground:
      215 20.2% 65.1%;

    --accent:
      217.2 32.6% 17.5%;
    --accent-foreground:
      210 40% 98%;

    --destructive:
      0 62.8% 30.6%;
    --destructive-foreground:
      210 40% 98%;

    --border:
      217.2 32.6% 17.5%;
    --input:
      217.2 32.6% 17.5%;
    --ring:
      212.7 26.8% 83.9%;
    --sidebar-background:
      240 5.9% 10%;
    --sidebar-foreground:
      240 4.8% 95.9%;
    --sidebar-primary:
      224.3 76.3% 48%;
    --sidebar-primary-foreground:
      0 0% 100%;
    --sidebar-accent:
      240 3.7% 15.9%;
    --sidebar-accent-foreground:
      240 4.8% 95.9%;
    --sidebar-border:
      240 3.7% 15.9%;
    --sidebar-ring:
      217.2 91.2% 59.8%;

    --shadow-xs:
      0 1px 0 hsl(0 0% 0% / 0.25), 0 14px 32px -22px hsl(0 0% 0% / 0.75);
    --shadow-soft:
      0 1px 2px hsl(0 0% 0% / 0.25), 0 10px 22px -12px hsl(0 0% 0% / 0.55);
    --shadow-elev:
      0 2px 8px hsl(0 0% 0% / 0.3), 0 18px 46px -18px hsl(0 0% 0% / 0.6);

    --button-outline:
      220 10% 28%;
    --primary-border:
      210 40% 78%;

    --app-bg-1:
      222.2 84% 4.9%;
    --app-bg-2:
      222.2 60% 6%;
    --app-glow-a:
      210 90% 22%;
    --app-glow-b:
      24 90% 24%;

    --score-sat:
      72%;
    --score-lit:
      58%;
    --font-heading: Gropled, ui-sans-serif, system-ui, sans-serif;
    --font-body: Monaco, ui-sans-serif, system-ui, sans-serif;
    --font-numbers: Neutral Face, ui-sans-serif, system-ui, sans-serif;
    --font-sans: var(--font-body);
    --font-serif: ui-serif, Georgia, serif;
    --font-mono: ui-monospace, SFMono-Regular, monospace;

    --font-weight-heading: 600;
    --font-weight-body: 500;
    --font-weight-numbers: 500;
    --radius:
      3rem;
    --shadow-sm:
      0px 1px 3.5px 0px hsla(217, 33%, 17%, 0.21);
    --shadow:
      0px 1px 7px 0px hsla(217, 33%, 17%, 0.21);
    --shadow-md:
      0px 1px 10.5px 0px hsla(217, 33%, 17%, 0.21);
    --shadow-lg:
      0px 1px 17.5px 0px hsla(217, 33%, 17%, 0.21);
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground font-body;
    font-weight: var(--font-weight-body);
  }

  .font-heading {
    font-weight: var(--font-weight-heading);
  }

  .font-body {
    font-weight: var(--font-weight-body);
  }

  .font-numbers {
    font-weight: var(--font-weight-numbers);
  }
}

@layer components {
  .app-bg {
    /* Match reference composition (keep semantic tokens; no hardcoded colors) */
    background:
      radial-gradient(900px 450px at 12% 10%, hsl(var(--primary) / 0.12), transparent 65%),
      radial-gradient(820px 460px at 98% 4%, hsl(var(--destructive) / 0.16), transparent 62%),
      radial-gradient(800px 420px at 92% 16%, hsl(var(--accent) / 0.12), transparent 60%),
      radial-gradient(1000px 600px at 45% 108%, hsl(var(--destructive) / 0.1), transparent 55%),
      linear-gradient(180deg, hsl(var(--background)) 0%, hsl(var(--background)) 100%);
  }

  .paper {
    /* Reference-like paper layers */
    background:
      linear-gradient(180deg, hsl(var(--card) / 0.86), hsl(var(--card) / 0.96)),
      radial-gradient(700px 280px at 15% 10%, hsl(var(--primary) / 0.08), transparent 55%),
      radial-gradient(800px 320px at 85% 0%, hsl(var(--accent) / 0.08), transparent 55%);
    @apply relative rounded-[28px] border border-border/60 shadow-elev;
  }


  .tilt-card {
    transform-style: preserve-3d;
  }

  .custom-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: hsl(var(--border)) transparent;
  }

  .custom-scrollbar::-webkit-scrollbar {
    height: 10px;
    width: 10px;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: hsl(var(--border));
    border-radius: 999px;
    border: 3px solid transparent;
    background-clip: content-box;
  }

  .hover-elevate {
    /* Avoid transform-induced text blur: lift via `top`, shadow via ::after layer */
    position: relative;
    top: 0;

    /* Keep a tiny baseline shadow so button doesn't look flat */
    box-shadow: 0 1px 0 hsl(var(--foreground) / 0.03);

    transition:
      top 520ms cubic-bezier(0.16, 1, 0.3, 1),
      box-shadow 520ms cubic-bezier(0.16, 1, 0.3, 1),
      background-color 220ms ease,
      border-color 220ms ease,
      color 220ms ease;
  }

  .hover-elevate::after {
    content: "";
    position: absolute;
    left: 10px;
    right: 10px;
    top: calc(100% - 40px);
    height: 30px;
    border-radius: 999px;
    pointer-events: none;

    /* Big, soft, tinted shadow that appears *below* the button */
    background: var(--elev-shadow, hsl(var(--foreground)));
    filter: blur(21px);
    opacity: 0;
    transform: translateY(-6.67px);
    transition:
      opacity 520ms cubic-bezier(0.16, 0.1, 0.3, 0.5),
      transform 520ms cubic-bezier(0.16, 0.1, 0.3, 1);
    z-index: -1;
  }

  .hover-elevate:hover {
    top: 4px;
    box-shadow: 0 1px 0 hsl(var(--foreground) / 0.02);
  }

  .hover-elevate:hover::after {
    opacity: 1;
    /* half the previous down-shift */
    transform: translateY(4px);
  }

  .active-elevate-2:active {
    top: 4px;
  }

  /* Rubber press effect (stretchy) */
  @keyframes rubber-press {
    0% {
      transform: scale3d(1, 1, 1);
    }

    35% {
      transform: scale3d(1.06, 0.92, 1);
    }

    70% {
      transform: scale3d(0.98, 1.04, 1);
    }

    100% {
      transform: scale3d(1, 1, 1);
    }
  }

  .rubber-press {
    transform: translateZ(0);
    backface-visibility: hidden;
    transform-style: preserve-3d;
  }

  .animate-rubber {
    animation: rubber-press 369ms cubic-bezier(0.9, 1, 0.3, 1);
  }

  /* Hit-flash effect (box-shadow glow - doesn't break 3D context) */
  @keyframes hit-flash {
    0% {
      box-shadow: inset 0 0 0 0 rgba(255, 255, 255, 0);
    }
    50% {
      box-shadow: inset 0 0 20px 8px rgba(255, 255, 255, 0.8);
    }
    100% {
      box-shadow: inset 0 0 0 0 rgba(255, 255, 255, 0);
    }
  }

  @keyframes hit-flash-bar {
    0% {
      filter: brightness(1);
    }
    50% {
      filter: brightness(1.6);
    }
    100% {
      filter: brightness(1);
    }
  }

  .hit-flash-container {
    animation: hit-flash 200ms linear;
  }

  .hit-flash-bar {
    animation: hit-flash-bar 200ms linear;
  }

  /* Opt-out for buttons that must not move/shadow on hover (e.g. delete icon)
     NOTE: we do NOT disable the rubber-press animation on :active. */
  .no-elevate,
  .no-elevate:hover {
    top: 0 !important;
    box-shadow: none !important;
  }

  .no-elevate::after,
  .no-elevate:hover::after {
    display: none !important;
  }

  .sort-active {
    background-color: hsla(172, 85%, 44%, 0.4) !important;
    border: 1px solid hsl(172.5, 66%, 50.4%) !important;
    color: white !important;
  }
}
